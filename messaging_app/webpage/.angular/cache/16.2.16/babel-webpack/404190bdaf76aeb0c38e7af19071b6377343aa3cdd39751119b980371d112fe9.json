{"ast":null,"code":"import { interval, Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"logBox\"];\nfunction LiveLogsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"span\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const log_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r1);\n  }\n}\nexport let LiveLogsComponent = /*#__PURE__*/(() => {\n  class LiveLogsComponent {\n    constructor(cdr) {\n      this.cdr = cdr;\n      this.logs = [];\n      this.isPaused = false;\n      this.autoScroll = true;\n      this.showLevels = ['INFO', 'ERROR', 'WARN']; // Filter visible levels\n      this.maxLogs = 200;\n      this.destroy$ = new Subject();\n      // Realistic log templates\n      this.logTemplates = [\n      // API & Backend\n      '[API] POST /auth/login - 200 OK - user=alex.ross', '[API] GET /tickets - 200 OK - count=42 - took=23ms', '[API] PUT /tickets/101 - 200 OK - status=In Progress', '[DATABASE] Query tickets - rows=15 - index_scan=true',\n      // Services & Microservices\n      '[AUTH] Token refreshed for alex.ross - expires=2025-12-03T12:00:00Z', '[NOTIFICATION] Email sent to sara.williams - template=payment_failed', '[CACHE] Redis GET user:101 - HIT - ttl=3600s', '[QUEUE] RabbitMQ ticket-101 processed - worker=support-bot',\n      // Infra & Monitoring\n      '[HEALTH] Postgres connection healthy - latency=12ms', '[METRICS] CPU=23.4% MEM=1.2GB - prometheus scrape OK', '[LOAD_BALANCER] Route /api/tickets -> pod-3 - sticky=true',\n      // Errors & Warnings\n      '[ERROR] Stripe webhook timeout - retry=3/5', '[WARN] Rate limit hit - IP=192.168.1.100 - remaining=45/100', '[ERROR] Elasticsearch cluster yellow - shard=knowledgebase-4',\n      // Frontend & User Activity\n      '[FRONTEND] React hydration complete - bundle=2.1MB', '[USER] alex.ross viewed /tickets - session=abc123', '[ANALYTICS] Pageview dashboard - user_count=247 active=12'];\n    }\n    ngOnInit() {\n      // Generate initial logs\n      for (let i = 0; i < 50; i++) {\n        this.generateLog();\n      }\n      // Live log stream\n      interval(1200).pipe(takeUntil(this.destroy$)).subscribe(() => {\n        if (!this.isPaused) {\n          this.generateLog();\n        }\n      });\n    }\n    ngAfterViewInit() {\n      this.scrollToBottom();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      if (this.scrollTimeout) {\n        clearTimeout(this.scrollTimeout);\n      }\n    }\n    togglePause() {\n      this.isPaused = !this.isPaused;\n    }\n    toggleAutoScroll() {\n      this.autoScroll = !this.autoScroll;\n      if (this.autoScroll) {\n        this.scrollToBottom();\n      }\n    }\n    clearLogs() {\n      this.logs = [];\n    }\n    generateLog() {\n      const level = this.getRandomLevel();\n      const template = this.logTemplates[Math.floor(Math.random() * this.logTemplates.length)];\n      const id = Math.random().toString(36).slice(2, 9);\n      const log = {\n        timestamp: new Date().toLocaleTimeString('en-US', {\n          hour12: false,\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        }),\n        level,\n        message: template,\n        id\n      };\n      this.logs.push(log);\n      // Maintain max logs\n      if (this.logs.length > this.maxLogs) {\n        this.logs.shift();\n      }\n      // Auto-scroll if enabled\n      if (this.autoScroll) {\n        this.scrollTimeout = setTimeout(() => this.scrollToBottom(), 100);\n      }\n      this.cdr.detectChanges();\n    }\n    getRandomLevel() {\n      const weights = {\n        INFO: 0.5,\n        DEBUG: 0.3,\n        WARN: 0.15,\n        ERROR: 0.04,\n        SUCCESS: 0.01\n      };\n      const rand = Math.random();\n      let cumulative = 0;\n      for (const [level, weight] of Object.entries(weights)) {\n        cumulative += weight;\n        if (rand <= cumulative) {\n          return level;\n        }\n      }\n      return 'INFO';\n    }\n    scrollToBottom() {\n      try {\n        if (this.logBox?.nativeElement) {\n          this.logBox.nativeElement.scrollTop = this.logBox.nativeElement.scrollHeight;\n        }\n      } catch (e) {\n        console.warn('Scroll failed:', e);\n      }\n    }\n    shouldShowLog(log) {\n      return this.showLevels.includes(log.level);\n    }\n    static {\n      this.ɵfac = function LiveLogsComponent_Factory(t) {\n        return new (t || LiveLogsComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LiveLogsComponent,\n        selectors: [[\"app-live-logs\"]],\n        viewQuery: function LiveLogsComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.logBox = _t.first);\n          }\n        },\n        decls: 4,\n        vars: 1,\n        consts: [[1, \"bg-white\", \"rounded-xl\", \"shadow-lg\", \"p-4\", \"h-96\", \"overflow-auto\", \"flex\", \"flex-col\", \"space-y-1\"], [1, \"text-2xl\", \"font-semibold\", \"text-indigo-800\", \"mb-2\"], [\"class\", \"text-xs md:text-sm font-mono p-1 border-b border-gray-100\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-xs\", \"md:text-sm\", \"font-mono\", \"p-1\", \"border-b\", \"border-gray-100\"], [1, \"text-gray-700\"]],\n        template: function LiveLogsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n            i0.ɵɵtext(2, \"Live Logs\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, LiveLogsComponent_div_3_Template, 3, 1, \"div\", 2);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.logs);\n          }\n        },\n        dependencies: [i1.NgForOf],\n        styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n      });\n    }\n  }\n  return LiveLogsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}